# ğŸ¯ æœ€ç»ˆè§£å†³æ–¹æ¡ˆ - Content-Type é—®é¢˜

## é—®é¢˜ç¡®è®¤

é€šè¿‡ `curl` æµ‹è¯•å‘ç°ï¼Œå³ä½¿æ•°æ®åº“ä¸­è®¾ç½®äº† `text/html`ï¼Œå®é™…å“åº”è¿˜æ˜¯ï¼š
```
content-type: text/plain
```

è¿™æ˜¯ Supabase Storage çš„ä¸€ä¸ªå·²çŸ¥é—®é¢˜ï¼šé€šè¿‡ API ä¸Šä¼ çš„æ–‡ä»¶ï¼ŒContent-Type å¯èƒ½ä¸ä¼šæ­£ç¡®åº”ç”¨ã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡ Dashboard æ‰‹åŠ¨ä¸Šä¼ 

### æ–¹æ³•ï¼ˆæœ€å¯é ï¼‰ï¼šåˆ é™¤æ–‡ä»¶å¹¶é€šè¿‡ Dashboard é‡æ–°ä¸Šä¼ 

1. **åˆ é™¤ç°æœ‰æ–‡ä»¶**
   - è®¿é—®ï¼šhttps://app.supabase.com
   - Storage â†’ public-pages
   - æ‰¾åˆ° `read-later.html`
   - ç‚¹å‡»å³ä¾§ â‹® â†’ Delete

2. **é€šè¿‡ Dashboard ä¸Šä¼ **
   - ç‚¹å‡» **Upload file** æŒ‰é’®
   - é€‰æ‹©ä½ æœ¬åœ°çš„æ–‡ä»¶ï¼š`public/read-later-standalone.html`
   - **é‡è¦**ï¼šä¸Šä¼ å‰ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ "MIME type" æˆ– "Content-Type" é€‰é¡¹
   - å¦‚æœæœ‰ï¼Œè®¾ç½®ä¸º `text/html`
   - ç‚¹å‡» Upload

3. **ä¸Šä¼ åé‡å‘½å**
   - å¦‚æœæ–‡ä»¶åæ˜¯ `read-later-standalone.html`
   - ç‚¹å‡» â‹® â†’ Rename
   - æ”¹ä¸º `read-later.html`

4. **éªŒè¯**
   ```bash
   curl -I https://rimhmaeecdcrhuqbisjv.supabase.co/storage/v1/object/public/public-pages/read-later.html | grep content-type
   ```
   
   åº”è¯¥æ˜¾ç¤ºï¼š`content-type: text/html`

---

## ğŸ”§ å¤‡é€‰æ–¹æ¡ˆï¼šä¿®æ”¹ Bucket è®¾ç½®

Supabase çš„æŸäº› bucket è®¾ç½®ä¼šå½±å“ Content-Type çš„å¤„ç†ã€‚

### æ£€æŸ¥ Bucket é…ç½®

1. Storage â†’ ç‚¹å‡» public-pages bucket å³ä¾§çš„ âš™ï¸
2. æŸ¥çœ‹è®¾ç½®ï¼š
   - **Allowed MIME types**: ç¡®ä¿åŒ…å« `text/html`
   - **File size limit**: åˆç†è®¾ç½®
3. å¦‚æœæœ‰ "Auto-detect MIME type" é€‰é¡¹ï¼Œç¡®ä¿å®ƒå·²å¯ç”¨

---

## ğŸ› ï¸ é«˜çº§æ–¹æ¡ˆï¼šä½¿ç”¨ Supabase CLI

å¦‚æœä½ å®‰è£…äº† Supabase CLIï¼š

```bash
# å®‰è£… CLIï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
npm install -g supabase

# ç™»å½•
supabase login

# ä¸Šä¼ æ–‡ä»¶
supabase storage cp \
  public/read-later-standalone.html \
  supabase://public-pages/read-later.html \
  --content-type "text/html"
```

---

## ğŸ“Š ä¸ºä»€ä¹ˆ API ä¸Šä¼ ä¸workï¼Ÿ

Supabase Storage æœ‰å‡ ä¸ªå·²çŸ¥é™åˆ¶ï¼š

1. **Content-Type ä¼˜å…ˆçº§**
   - æ–‡ä»¶æ‰©å±•å > API æŒ‡å®šçš„ Content-Type
   - æŸäº›æƒ…å†µä¸‹ä¼šè¢« Cloudflare CDN è¦†ç›–

2. **CSP ç­–ç•¥**
   - Storage é»˜è®¤çš„ CSP å¾ˆä¸¥æ ¼ï¼š`default-src 'none'; sandbox`
   - å¯èƒ½å½±å“æŸäº›åŠŸèƒ½

3. **ç¼“å­˜é—®é¢˜**
   - Cloudflare å¯èƒ½ç¼“å­˜äº†æ—§çš„ Content-Type
   - éœ€è¦ç­‰å¾…ç¼“å­˜è¿‡æœŸæˆ–æ‰‹åŠ¨æ¸…é™¤

---

## ğŸ¯ æ¨èæµç¨‹

### æœ€ç®€å•å¯é çš„æ–¹å¼ï¼š

1. **åˆ é™¤ API ä¸Šä¼ çš„æ–‡ä»¶**
2. **é€šè¿‡ Dashboard æ‰‹åŠ¨ä¸Šä¼ ** `public/read-later-standalone.html`
3. **é‡å‘½åä¸º** `read-later.html`
4. **æµ‹è¯•**ï¼šcurl æ£€æŸ¥ Content-Type
5. **æµè§ˆå™¨æ‰“å¼€**ï¼šåº”è¯¥èƒ½æ­£å¸¸æ¸²æŸ“

### é¢„è®¡æ—¶é—´ï¼š3-5 åˆ†é’Ÿ

---

## ğŸ” éªŒè¯æˆåŠŸçš„æ ‡å¿—

1. **curl æµ‹è¯•**
   ```bash
   curl -I https://rimhmaeecdcrhuqbisjv.supabase.co/storage/v1/object/public/public-pages/read-later.html
   ```
   
   åº”è¯¥çœ‹åˆ°ï¼š
   ```
   HTTP/2 200
   content-type: text/html
   ```

2. **æµè§ˆå™¨æµ‹è¯•**
   - ä½¿ç”¨æ— ç—•æ¨¡å¼ï¼ˆé¿å…ç¼“å­˜ï¼‰
   - æ‰“å¼€ URL
   - åº”è¯¥çœ‹åˆ°å®Œæ•´çš„ç½‘é¡µï¼Œä¸æ˜¯æºä»£ç 

3. **å¼€å‘è€…å·¥å…·**
   - F12 â†’ Network
   - åˆ·æ–°é¡µé¢
   - ç‚¹å‡» read-later.html è¯·æ±‚
   - Response Headers â†’ `content-type: text/html`

---

## ğŸ’¡ æœªæ¥çš„æ”¹è¿›

æˆ‘ä¼šç ”ç©¶ä»¥ä¸‹æ–¹æ¡ˆï¼š

1. ä½¿ç”¨ Supabase Edge Functions ä½œä¸ºä»£ç†ï¼ŒåŠ¨æ€è®¾ç½®æ­£ç¡®çš„ Content-Type
2. å°† HTML æ–‡ä»¶æ‰˜ç®¡åˆ°å…¶ä»–æœåŠ¡ï¼ˆå¦‚ GitHub Pagesã€Cloudflare Pagesï¼‰
3. åˆ›å»ºä¸€ä¸ª Chrome Extension é¡µé¢è€Œä¸æ˜¯ç‹¬ç«‹ HTML

ä½†ç°åœ¨ï¼Œ**æ‰‹åŠ¨ä¸Šä¼ æ˜¯æœ€å¿«æœ€å¯é çš„æ–¹æ³•**ã€‚

---

## ğŸš€ ç°åœ¨å¼€å§‹

1. æ‰“å¼€ https://app.supabase.com
2. Storage â†’ public-pages
3. åˆ é™¤æ—§çš„ `read-later.html`
4. Upload â†’ é€‰æ‹© `public/read-later-standalone.html`
5. é‡å‘½åä¸º `read-later.html`
6. æµ‹è¯•ï¼

**5åˆ†é’Ÿæå®šï¼** è¿™æ¬¡ä¸€å®šèƒ½æˆåŠŸï¼ğŸ‰
