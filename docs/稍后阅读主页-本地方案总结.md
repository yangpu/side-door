# 📋 稍后阅读主页 - 本地 Web 服务方案

## 🎯 方案变更

从 **Supabase Storage 托管** 改为 **本地/云服务器托管**

### 为什么改变？

1. ❌ Supabase Storage 的 Content-Type 设置问题难以解决
2. ❌ API 上传不可靠，需要手动操作
3. ✅ 本地方案更简单、更可控
4. ✅ 易于部署到任何云服务器

---

## 📦 已创建的文件

### 核心文件

1. **`serve-read-later.js`** - 本地 HTTP 服务器
   - 提供 HTML 页面服务
   - 支持 CORS
   - 正确的 Content-Type
   - 健康检查端点

2. **`public/read-later-standalone.html`** - 稍后阅读主页
   - 完整的 HTML 页面
   - 内联 CSS 和 JavaScript
   - Supabase 集成

### 配置文件

3. **`nginx.conf.example`** - Nginx 配置模板
   - 静态文件方案
   - 反向代理方案
   - HTTPS 配置

### 文档

4. **`docs/本地运行稍后阅读主页.md`** - 本地开发指南
5. **`docs/部署到云服务器.md`** - 部署教程
6. **`测试本地服务.sh`** - 快速测试脚本

### npm 脚本

7. **`package.json`** - 新增命令
   - `npm run serve:read-later` - 启动本地服务

---

## 🚀 快速开始

### 本地运行（现在就试试！）

```bash
# 1. 启动服务
npm run serve:read-later

# 2. 浏览器访问
http://localhost:3001
```

### 自动化测试

```bash
./测试本地服务.sh
```

---

## 🌐 使用场景

### 场景 1: 个人本地使用

```bash
npm run serve:read-later
```

访问：`http://localhost:3001`

**优点**：
- 无需云服务
- 完全免费
- 数据本地控制

### 场景 2: 局域网共享

服务启动后会显示局域网 IP：

```
🌐 局域网访问:
   http://192.168.1.100:3001
```

手机、平板通过这个地址访问。

**优点**：
- 所有设备可访问
- 无需公网
- 局域网高速

### 场景 3: 部署到云服务器

参考 `docs/部署到云服务器.md`

使用 Nginx 提供服务：

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/sidedoor;
    
    location / {
        try_files /read-later-standalone.html =404;
        add_header Content-Type "text/html; charset=utf-8";
    }
}
```

**优点**：
- 公网访问
- 专业部署
- 支持 HTTPS
- 高性能

---

## 📊 方案对比

| 特性 | Supabase Storage | 本地服务 | 云服务器 |
|------|-----------------|---------|---------|
| 部署难度 | ❌ 复杂 | ✅ 简单 | ⚠️ 中等 |
| Content-Type | ❌ 有问题 | ✅ 正确 | ✅ 正确 |
| 成本 | 免费 | 免费 | 付费 |
| 访问速度 | 中 | 极快 | 快 |
| 公网访问 | ✅ | ❌ | ✅ |
| 局域网访问 | ✅ | ✅ | ✅ |
| 可控性 | ⚠️ 低 | ✅ 高 | ✅ 高 |

---

## 🔧 技术栈

### 本地开发

- **Node.js** - HTTP 服务器
- **原生 HTTP 模块** - 无额外依赖
- **HTML/CSS/JS** - 前端页面

### 生产部署

- **Nginx** - Web 服务器（推荐）
- **PM2** - Node.js 进程管理（可选）
- **Let's Encrypt** - 免费 SSL 证书

---

## 📝 后续开发

### 已实现 ✅

- [x] 本地 HTTP 服务器
- [x] HTML 页面
- [x] Nginx 配置模板
- [x] 部署文档
- [x] npm 脚本

### 可选功能 💡

- [ ] 添加 API 端点（如搜索、过滤）
- [ ] 支持 WebSocket（实时更新）
- [ ] Docker 镜像
- [ ] 自动部署脚本
- [ ] 监控和统计

---

## 🎯 推荐工作流

### 开发阶段

1. 本地运行：`npm run serve:read-later`
2. 编辑 `public/read-later-standalone.html`
3. 刷新浏览器查看更新

### 测试阶段

1. 在多个设备上测试（手机、平板）
2. 使用局域网 IP 访问
3. 测试暗色模式、分页等功能

### 部署阶段

1. 准备云服务器
2. 安装 Nginx
3. 上传文件
4. 配置 Nginx
5. 配置 HTTPS

---

## 📚 文档索引

### 快速开始

- **[本地运行指南](docs/本地运行稍后阅读主页.md)** ⭐ 必读

### 进阶

- **[部署到云服务器](docs/部署到云服务器.md)** - 生产环境部署
- **[nginx.conf.example](nginx.conf.example)** - Nginx 配置参考

### 脚本

- **`serve-read-later.js`** - 服务器脚本
- **`测试本地服务.sh`** - 测试脚本

---

## 🎉 现在开始！

### 最简单的方式（1 分钟）

```bash
# 启动服务
npm run serve:read-later

# 浏览器打开
open http://localhost:3001
```

就这么简单！享受你的稍后阅读主页吧！🚀

---

## ❓ 需要帮助？

查看文档或运行：

```bash
# 快速测试
./测试本地服务.sh

# 查看服务日志
# 日志会直接显示在终端
```

祝使用愉快！✨
